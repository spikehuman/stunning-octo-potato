<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8">
  <title>Отписка</title>

  <!-- Обязательный скрипт Altcraft -->
	<script src="https://pxl.domain.com:80/ak_list_unsubscribe.js?id=MXwy"></script>
</head>
<body>
  <h1>Отписка от рассылки</h1>
  <p id="status">Загрузка…</p>

  <script>
    // Из какого параметра берём ID
    const SOURCE_PARAM = "paramname";
    // Какой параметр нужен Altcraft
    const TARGET_PARAM = "send_message_id";

    const url = new URL(window.location.href);
    const value = url.searchParams.get(SOURCE_PARAM);

    const status = document.getElementById("status");

    if (!value) {
      status.innerText = "Ссылка некорректна: отсутствует параметр paramname";
    } else {
      // добавляем параметр для Altcraft
      url.searchParams.set(TARGET_PARAM, value);

      history.replaceState({}, "", url.toString());

      status.innerText = "Запрос на отписку обрабатывается…";
    }
  </script>
</body>
</html>
